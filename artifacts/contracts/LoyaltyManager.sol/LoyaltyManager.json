{
  "_format": "hh-sol-artifact-1",
  "contractName": "LoyaltyManager",
  "sourceName": "contracts/LoyaltyManager.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_loyaltyToken",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "KYCVerified",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "points",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "tier",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "totalSpent",
          "type": "uint256"
        }
      ],
      "name": "PointsAwarded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "points",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "item",
          "type": "string"
        }
      ],
      "name": "PointsRedeemed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "oldTier",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newTier",
          "type": "uint256"
        }
      ],
      "name": "TierUpgraded",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "GOLD_THRESHOLD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "PLATINUM_THRESHOLD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "SILVER_THRESHOLD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "spentCents",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "ref",
          "type": "string"
        }
      ],
      "name": "awardPoints",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "pointsAwarded",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getUserProfile",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "totalSpent",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "tier",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lastActivity",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "kycVerified",
          "type": "bool"
        },
        {
          "internalType": "string",
          "name": "tierName",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "loyaltyToken",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "pointsToRedeem",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "itemName",
          "type": "string"
        }
      ],
      "name": "redeemPoints",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userKYCVerified",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userLastActivity",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userTier",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "userTotalSpent",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "verifyKYC",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x6080604052600280546001600160a01b03191661016717905534801561002457600080fd5b50604051610c97380380610c9783398101604081905261004391610071565b600080546001600160a01b039092166001600160a01b031992831617905560018054909116331790556100a1565b60006020828403121561008357600080fd5b81516001600160a01b038116811461009a57600080fd5b9392505050565b610be7806100b06000396000f3fe608060405234801561001057600080fd5b50600436106100ea5760003560e01c80638da5cb5b1161008c578063caaffae911610066578063caaffae9146101f1578063d7ddd176146101fa578063f2fde38b1461022d578063f8289b851461024057600080fd5b80638da5cb5b146101b1578063987ee156146101c4578063c1a0db30146101e857600080fd5b806356973974116100c8578063569739741461014a578063770aa84d1461015357806377ce29921461017e5780637c1867251461019e57600080fd5b806321c7557c146100ef578063290ab9ab1461012257806338d1601114610135575b600080fd5b61010f6100fd36600461096c565b60046020526000908152604090205481565b6040519081526020015b60405180910390f35b61010f61013036600461098e565b610260565b61014861014336600461096c565b6104f6565b005b61010f61138881565b600054610166906001600160a01b031681565b6040516001600160a01b039091168152602001610119565b61010f61018c36600461096c565b60056020526000908152604090205481565b6101486101ac3660046109fe565b61056c565b600154610166906001600160a01b031681565b6101d76101d236600461096c565b6106a5565b604051610119959493929190610af4565b61010f6103e881565b61010f61271081565b61021d61020836600461096c565b60066020526000908152604090205460ff1681565b6040519015158152602001610119565b61014861023b36600461096c565b610709565b61010f61024e36600461096c565b60036020526000908152604090205481565b6001546000906001600160a01b031633146102965760405162461bcd60e51b815260040161028d90610a92565b60405180910390fd5b6001600160a01b03841660009081526004602052604081205484916102ba826107ab565b905060646102c88285610b66565b6102d29190610b44565b6002546000805460015460405163eca3691760e01b81526001600160a01b03928316600482015290821660248201528b82166044820152600785900b6064820152939750909291169063eca3691790608401602060405180830381600087803b15801561033e57600080fd5b505af1158015610352573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061037691906109e5565b9050601681146103c05760405162461bcd60e51b8152602060048201526015602482015274151bdad95b881d1c985b9cd9995c8819985a5b1959605a1b604482015260640161028d565b6001600160a01b038816600090815260036020526040812080548992906103e8908490610b2c565b90915550506001600160a01b0388166000908152600560209081526040808320429055600390915281205461041c906107e5565b9050838111156104865760408051858152602081018390526001600160a01b038b16917f0523447c6f08539198ff81fbfbe061546a834b64263c20d00b88a1bdc41f2506910160405180910390a26001600160a01b03891660009081526004602052604090208190555b6001600160a01b03891660008181526004602090815260408083205460038352928190205481518b8152928301939093528101919091527fe75c9d556e0c125783993fe5f33556bed9413e719a31f8f192774fb5f2f2abc59060600160405180910390a250505050509392505050565b6001546001600160a01b031633146105205760405162461bcd60e51b815260040161028d90610a92565b6001600160a01b038116600081815260066020526040808220805460ff19166001179055517f65c84ee842eafc291d1272a6e3d10f8c454c4288e63f5db3f7be2b3012f321a99190a250565b6002546000805460015460405163eca3691760e01b81526001600160a01b0392831660048201523360248201529082166044820152600786900b60648201529192169063eca3691790608401602060405180830381600087803b1580156105d257600080fd5b505af11580156105e6573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061060a91906109e5565b9050601681146106545760405162461bcd60e51b8152602060048201526015602482015274151bdad95b881d1c985b9cd9995c8819985a5b1959605a1b604482015260640161028d565b3360008181526005602052604090819020429055517fda49bb5bf412718988a26709b7c8c5385b0af3ae2570f06613f372c2d401faf2906106989086908690610ad3565b60405180910390a2505050565b6001600160a01b03811660009081526003602090815260408083205460048084528285205460058552838620546006865293862054919094528493849384936060939092919060ff166106f783610822565b939a9299509097509550909350915050565b6001546001600160a01b031633146107335760405162461bcd60e51b815260040161028d90610a92565b6001600160a01b0381166107895760405162461bcd60e51b815260206004820181905260248201527f4e6577206f776e65722063616e6e6f74206265207a65726f2061646472657373604482015260640161028d565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000816107ba57506064919050565b81600114156107cb57506096919050565b81600214156107dc575060c8919050565b5061012c919050565b600061271082106107f857506003919050565b611388821061080957506002919050565b6103e8821061081a57506001919050565b506000919050565b60608161084b57505060408051808201909152600681526542726f6e7a6560d01b602082015290565b816001141561087657505060408051808201909152600681526529b4b63b32b960d11b602082015290565b816002141561089f57505060408051808201909152600481526311dbdb1960e21b602082015290565b5050604080518082019091526008815267506c6174696e756d60c01b602082015290565b80356001600160a01b03811681146108da57600080fd5b919050565b600082601f8301126108f057600080fd5b813567ffffffffffffffff8082111561090b5761090b610b9b565b604051601f8301601f19908116603f0116810190828211818310171561093357610933610b9b565b8160405283815286602085880101111561094c57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60006020828403121561097e57600080fd5b610987826108c3565b9392505050565b6000806000606084860312156109a357600080fd5b6109ac846108c3565b925060208401359150604084013567ffffffffffffffff8111156109cf57600080fd5b6109db868287016108df565b9150509250925092565b6000602082840312156109f757600080fd5b5051919050565b60008060408385031215610a1157600080fd5b82359150602083013567ffffffffffffffff811115610a2f57600080fd5b610a3b858286016108df565b9150509250929050565b6000815180845260005b81811015610a6b57602081850181015186830182015201610a4f565b81811115610a7d576000602083870101525b50601f01601f19169290920160200192915050565b60208082526021908201527f4f6e6c79206f776e65722063616e2063616c6c20746869732066756e6374696f6040820152603760f91b606082015260800190565b828152604060208201526000610aec6040830184610a45565b949350505050565b858152846020820152836040820152821515606082015260a060808201526000610b2160a0830184610a45565b979650505050505050565b60008219821115610b3f57610b3f610b85565b500190565b600082610b6157634e487b7160e01b600052601260045260246000fd5b500490565b6000816000190483118215151615610b8057610b80610b85565b500290565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052604160045260246000fdfea2646970667358221220bf824cd7df27c44b9459fe746ea90351bf36560974aed12911caf44912ceb10764736f6c63430008070033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100ea5760003560e01c80638da5cb5b1161008c578063caaffae911610066578063caaffae9146101f1578063d7ddd176146101fa578063f2fde38b1461022d578063f8289b851461024057600080fd5b80638da5cb5b146101b1578063987ee156146101c4578063c1a0db30146101e857600080fd5b806356973974116100c8578063569739741461014a578063770aa84d1461015357806377ce29921461017e5780637c1867251461019e57600080fd5b806321c7557c146100ef578063290ab9ab1461012257806338d1601114610135575b600080fd5b61010f6100fd36600461096c565b60046020526000908152604090205481565b6040519081526020015b60405180910390f35b61010f61013036600461098e565b610260565b61014861014336600461096c565b6104f6565b005b61010f61138881565b600054610166906001600160a01b031681565b6040516001600160a01b039091168152602001610119565b61010f61018c36600461096c565b60056020526000908152604090205481565b6101486101ac3660046109fe565b61056c565b600154610166906001600160a01b031681565b6101d76101d236600461096c565b6106a5565b604051610119959493929190610af4565b61010f6103e881565b61010f61271081565b61021d61020836600461096c565b60066020526000908152604090205460ff1681565b6040519015158152602001610119565b61014861023b36600461096c565b610709565b61010f61024e36600461096c565b60036020526000908152604090205481565b6001546000906001600160a01b031633146102965760405162461bcd60e51b815260040161028d90610a92565b60405180910390fd5b6001600160a01b03841660009081526004602052604081205484916102ba826107ab565b905060646102c88285610b66565b6102d29190610b44565b6002546000805460015460405163eca3691760e01b81526001600160a01b03928316600482015290821660248201528b82166044820152600785900b6064820152939750909291169063eca3691790608401602060405180830381600087803b15801561033e57600080fd5b505af1158015610352573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061037691906109e5565b9050601681146103c05760405162461bcd60e51b8152602060048201526015602482015274151bdad95b881d1c985b9cd9995c8819985a5b1959605a1b604482015260640161028d565b6001600160a01b038816600090815260036020526040812080548992906103e8908490610b2c565b90915550506001600160a01b0388166000908152600560209081526040808320429055600390915281205461041c906107e5565b9050838111156104865760408051858152602081018390526001600160a01b038b16917f0523447c6f08539198ff81fbfbe061546a834b64263c20d00b88a1bdc41f2506910160405180910390a26001600160a01b03891660009081526004602052604090208190555b6001600160a01b03891660008181526004602090815260408083205460038352928190205481518b8152928301939093528101919091527fe75c9d556e0c125783993fe5f33556bed9413e719a31f8f192774fb5f2f2abc59060600160405180910390a250505050509392505050565b6001546001600160a01b031633146105205760405162461bcd60e51b815260040161028d90610a92565b6001600160a01b038116600081815260066020526040808220805460ff19166001179055517f65c84ee842eafc291d1272a6e3d10f8c454c4288e63f5db3f7be2b3012f321a99190a250565b6002546000805460015460405163eca3691760e01b81526001600160a01b0392831660048201523360248201529082166044820152600786900b60648201529192169063eca3691790608401602060405180830381600087803b1580156105d257600080fd5b505af11580156105e6573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061060a91906109e5565b9050601681146106545760405162461bcd60e51b8152602060048201526015602482015274151bdad95b881d1c985b9cd9995c8819985a5b1959605a1b604482015260640161028d565b3360008181526005602052604090819020429055517fda49bb5bf412718988a26709b7c8c5385b0af3ae2570f06613f372c2d401faf2906106989086908690610ad3565b60405180910390a2505050565b6001600160a01b03811660009081526003602090815260408083205460048084528285205460058552838620546006865293862054919094528493849384936060939092919060ff166106f783610822565b939a9299509097509550909350915050565b6001546001600160a01b031633146107335760405162461bcd60e51b815260040161028d90610a92565b6001600160a01b0381166107895760405162461bcd60e51b815260206004820181905260248201527f4e6577206f776e65722063616e6e6f74206265207a65726f2061646472657373604482015260640161028d565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000816107ba57506064919050565b81600114156107cb57506096919050565b81600214156107dc575060c8919050565b5061012c919050565b600061271082106107f857506003919050565b611388821061080957506002919050565b6103e8821061081a57506001919050565b506000919050565b60608161084b57505060408051808201909152600681526542726f6e7a6560d01b602082015290565b816001141561087657505060408051808201909152600681526529b4b63b32b960d11b602082015290565b816002141561089f57505060408051808201909152600481526311dbdb1960e21b602082015290565b5050604080518082019091526008815267506c6174696e756d60c01b602082015290565b80356001600160a01b03811681146108da57600080fd5b919050565b600082601f8301126108f057600080fd5b813567ffffffffffffffff8082111561090b5761090b610b9b565b604051601f8301601f19908116603f0116810190828211818310171561093357610933610b9b565b8160405283815286602085880101111561094c57600080fd5b836020870160208301376000602085830101528094505050505092915050565b60006020828403121561097e57600080fd5b610987826108c3565b9392505050565b6000806000606084860312156109a357600080fd5b6109ac846108c3565b925060208401359150604084013567ffffffffffffffff8111156109cf57600080fd5b6109db868287016108df565b9150509250925092565b6000602082840312156109f757600080fd5b5051919050565b60008060408385031215610a1157600080fd5b82359150602083013567ffffffffffffffff811115610a2f57600080fd5b610a3b858286016108df565b9150509250929050565b6000815180845260005b81811015610a6b57602081850181015186830182015201610a4f565b81811115610a7d576000602083870101525b50601f01601f19169290920160200192915050565b60208082526021908201527f4f6e6c79206f776e65722063616e2063616c6c20746869732066756e6374696f6040820152603760f91b606082015260800190565b828152604060208201526000610aec6040830184610a45565b949350505050565b858152846020820152836040820152821515606082015260a060808201526000610b2160a0830184610a45565b979650505050505050565b60008219821115610b3f57610b3f610b85565b500190565b600082610b6157634e487b7160e01b600052601260045260246000fd5b500490565b6000816000190483118215151615610b8057610b80610b85565b500290565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052604160045260246000fdfea2646970667358221220bf824cd7df27c44b9459fe746ea90351bf36560974aed12911caf44912ceb10764736f6c63430008070033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
